<!DOCTYPE html>
<html>
<body>
<h1>スイッチ共有</h1>
<button id="btn">OFF</button>

<script>
const ws = new WebSocket('ws://localhost:8080');
const btn = document.getElementById('btn');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  if(data.type === 'update') {
    btn.textContent = data.state ? 'ON' : 'OFF';
  }
};

btn.addEventListener('click', () => {
  ws.send(JSON.stringify({ type: 'toggle' }));
});
</script>
</body>
</html>
