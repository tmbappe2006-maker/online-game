<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ジャンプゲーム</title>
  <style>
    body { text-align: center; font-family: sans-serif; }
    #game { position: relative; width: 400px; height: 200px; background: #cce; margin: 0 auto; overflow: hidden; border: 2px solid #000; }
    #player { position: absolute; bottom: 0; left: 50px; width: 30px; height: 30px; background: red; }
    #obstacle { position: absolute; bottom: 0; right: 0; width: 20px; height: 40px; background: green; }
  </style>
</head>
<body>
  <h1>ジャンプゲーム</h1>
  <p>スペースキーでジャンプ！障害物に当たったらゲームオーバー</p>
  <div id="game">
    <div id="player"></div>
    <div id="obstacle"></div>
  </div>
  <p id="score">スコア: 0</p>

  <script>
    const player = document.getElementById("player");
    const obstacle = document.getElementById("obstacle");
    const scoreText = document.getElementById("score");
    let score = 0;
    let jumping = false;
    let playerBottom = 0;
    let gameOver = false;

    document.addEventListener("keydown", (e) => {
      if (e.code === "Space" && !jumping) jump();
    });

    function jump() {
      jumping = true;
      let upInterval = setInterval(() => {
        if (playerBottom >= 100) { // ジャンプの高さ
          clearInterval(upInterval);
          let downInterval = setInterval(() => {
            if (playerBottom <= 0) {
              clearInterval(downInterval);
              jumping = false;
              playerBottom = 0;
              player.style.bottom = playerBottom + "px";
            } else {
              playerBottom -= 5;
              player.style.bottom = playerBottom + "px";
            }
          }, 20);
        } else {
          playerBottom += 5;
          player.style.bottom = playerBottom + "px";
        }
      }, 20);
    }

    function moveObstacle() {
      let obstacleLeft = 400;
      let move = setInterval(() => {
        if (gameOver) { clearInterval(move); return; }
        obstacleLeft -= 5;
        obstacle.style.left = obstacleLeft + "px";

        // 当たり判定
        if (obstacleLeft < 80 && obstacleLeft > 50 && playerBottom < 40) {
          gameOver = true;
          alert("ゲームオーバー! スコア: " + score);
        }

        if (obstacleLeft <= -20) {
          obstacleLeft = 400;
          score++;
          scoreText.textContent = "スコア: " + score;
        }
      }, 20);
    }

    moveObstacle();
  </script>
</body>
</html>
