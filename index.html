<!doctype html>
<html>
<head><meta charset="utf-8"><title>WS Debug</title></head>
<body>
  <h1>WS Debug</h1>
  <button id="btn" disabled>接続中...</button>
  <div id="log"></div>
  <script>
    function log(...args){ console.log(...args); const d=document.getElementById('log'); d.innerText += args.map(a=>typeof a==='object'?JSON.stringify(a):a).join(' ') + "\\n"; }
    const WS_URL = "wss://online-game-6wtl.onrender.com"; // ←あなたのURLならOK
    log('Trying to connect to', WS_URL);

    const btn = document.getElementById('btn');
    let socket = new WebSocket(WS_URL);

    socket.addEventListener('open', () => {
      log('OPEN');
      btn.disabled = false;
      btn.textContent = 'Toggle';
    });

    socket.addEventListener('message', (e) => {
      log('MSG', e.data);
    });

    socket.addEventListener('close', (e) => {
      log('CLOSE', e.code, e.reason);
      btn.disabled = true;
    });

    socket.addEventListener('error', (err) => {
      log('ERROR', err && err.message);
    });

    btn.addEventListener('click', () => {
      if (socket && socket.readyState === WebSocket.OPEN) {
        const msg = JSON.stringify({ type: 'toggle' });
        log('SEND', msg);
        socket.send(msg);
      } else log('not open');
    });
  </script>
</body>
</html>
